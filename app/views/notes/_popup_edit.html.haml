= form_for note, :html => {:multipart => true} do |f|
  = f.error_messages
  %p
    = f.hidden_field :chart_id, :value => chart.id
  %p
    = f.label :date
    %br
    = f.date_select :date
  %p
    = f.label :details
    %br
    = f.text_area :details, :cols => 55, :rows => 10
  %p
    = f.label :tag_names, "Tags"
    = f.text_field :tag_names, :id => "tags_#{note.id}"
  %p
    = f.fields_for :document do |document_form|
      = document_form.label :file
      - unless note.document.blank? or note.document.file.blank?
        = link_to note.document.file, note.document.file.url unless note.document.blank?
      %p= document_form.file_field :file
  %p
    = f.submit

=# stylesheet_link_tag "jquery.tagit.css"
= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"
= javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"
= javascript_include_tag "tag-it.js"

%script
  var tags = "#{@tag_list.join(',')}";
  $('#tags_#{note.id}').tagit({availableTags: tags.split(',')});
  //$(document).ready(function() { $("#tags_#{note.id}").tagsInput({autocomplete_url:tags.split(',')}); });